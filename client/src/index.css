/* ==========================================
   TAILWIND BASE - Must be first!
   ========================================== */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ==========================================
   CREATIVE HANDS - Design System v2
   "Precision Craft" - Analog Precision + White Gallery
   ========================================== */

/* ==========================================
   FONTS
   ========================================== */
@font-face {
    font-family: 'Copernicus-Cond-110';
    src: url('/fonts/CopernicusNewCondTrial110.woff2') format('woff2');
    font-weight: normal;
    font-style: normal;
    font-display: swap;
}

@font-face {
    font-family: 'Copernicus-Bold';
    src: url('/fonts/CopernicusBold.woff2') format('woff2');
    font-weight: bold;
    font-style: normal;
    font-display: swap;
    unicode-range: U+0000-007F, U+2000-206F;
    /* Solo caracteres b치sicos */
}

/* ==========================================
   CSS VARIABLES - Light Mode (default)
   ========================================== */
:root {
    /* Backgrounds - Warm cream undertones */
    --bg-primary: #FAF8F5;
    --bg-secondary: #F5F2EE;
    --bg-tertiary: #EFEBE6;
    --bg-elevated: #FFFFFF;

    /* Surfaces - Warm tints */
    --surface-default: #FFFDFB;
    --surface-hover: #F8F5F2;
    --surface-active: #F0EDE8;
    --surface-overlay: rgba(255, 253, 251, 0.85);

    /* Text */
    --text-primary: #1A1816;
    --text-secondary: #5C5550;
    --text-tertiary: #8A837A;
    --text-inverse: #FAFAFA;

    /* Borders */
    --border-default: #E5E5E3;
    --border-subtle: #EFEFED;
    --border-strong: #D0D0CE;

    /* Primary - Terracota */
    --primary: #CB6843;
    --primary-hover: #B25A39;
    --primary-active: #8F4830;
    --primary-muted: rgba(203, 104, 67, 0.1);

    /* Indicators */
    --indicator-off: #D4D4D4;
    --indicator-active: #CB6843;

    /* Shadows */
    --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.04);
    --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.06);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
    --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.1);
    --shadow-xl: 0 16px 48px rgba(0, 0, 0, 0.12);
    --shadow-glow: 0 0 20px rgba(203, 104, 67, 0.15);
    --shadow-glow-accent: 0 0 30px rgba(203, 104, 67, 0.25);

    /* Grain overlay - m치s visible */
    --grain-opacity: 0.06;

    /* Transition */
    --transition-fast: 150ms cubic-bezier(0.16, 1, 0.3, 1);
    --transition-normal: 250ms cubic-bezier(0.16, 1, 0.3, 1);
    --transition-slow: 400ms cubic-bezier(0.16, 1, 0.3, 1);
}

/* ==========================================
   CSS VARIABLES - Dark Mode
   ========================================== */
.dark {
    /* Backgrounds */
    --bg-primary: #0A0A0A;
    --bg-secondary: #111111;
    --bg-tertiary: #161616;
    --bg-elevated: #1A1A1A;

    /* Surfaces */
    --surface-default: #161616;
    --surface-hover: #1F1F1F;
    --surface-active: #262626;
    --surface-overlay: rgba(0, 0, 0, 0.8);

    /* Text */
    --text-primary: #FAFAFA;
    --text-secondary: #A0A0A0;
    --text-tertiary: #6B6B6B;
    --text-inverse: #1A1A1A;

    /* Borders */
    --border-default: #2A2A2A;
    --border-subtle: #1F1F1F;
    --border-strong: #3A3A3A;

    /* Indicators */
    --indicator-off: #404040;
    --indicator-active: #CB6843;

    /* Shadows - more subtle in dark mode */
    --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.2);
    --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.4);
    --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.5);
    --shadow-xl: 0 16px 48px rgba(0, 0, 0, 0.6);
    --shadow-glow: 0 0 20px rgba(203, 104, 67, 0.2);
    --shadow-glow-accent: 0 0 30px rgba(203, 104, 67, 0.35);

    /* Grain overlay - m치s visible en dark */
    --grain-opacity: 0.08;
}

/* ==========================================
   BASE RESET & DEFAULTS
   ========================================== */
*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    scroll-behavior: smooth;
}

/* Disable smooth scroll when Lenis is active */
html.lenis,
html.lenis body {
    scroll-behavior: auto;
}

html.lenis {
    height: auto;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    font-size: 1rem;
    line-height: 1.5;
    color: var(--text-primary);
    background-color: var(--bg-primary);
    min-height: 100vh;
    transition: background-color var(--transition-normal), color var(--transition-normal);
}

/* Theme transition */
html.transitioning body,
html.transitioning * {
    transition: background-color var(--transition-slow),
        color var(--transition-slow),
        border-color var(--transition-slow) !important;
}

/* ==========================================
   TYPOGRAPHY
   ========================================== */
h1,
h2,
h3,
h4,
h5,
h6 {
    font-family: 'Copernicus-Bold', Georgia, serif;
    font-weight: 700;
    line-height: 1.15;
    color: var(--text-primary);
}

h1 {
    font-size: 3rem;
}

h2 {
    font-size: 2.25rem;
}

h3 {
    font-size: 1.875rem;
}

h4 {
    font-size: 1.5rem;
}

h5 {
    font-size: 1.25rem;
}

h6 {
    font-size: 1rem;
}

p {
    color: var(--text-secondary);
    line-height: 1.7;
}

a {
    color: inherit;
    text-decoration: none;
    transition: color var(--transition-fast);
}

a:hover {
    color: var(--primary);
}

/* Mono for technical data */
.font-mono {
    font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;
}

/* Brand font for logo */
.font-brand {
    font-family: 'Copernicus-Cond-110', 'Copernicus-Bold', 'Playfair Display', Georgia, serif;
    /* Fallback a Georgia para tildes y 침 */
}

/* ==========================================
   FOCUS STYLES (Accessibility)
   ========================================== */
:focus-visible {
    outline: 2px solid var(--primary);
    outline-offset: 2px;
}

/* ==========================================
   SELECTION
   ========================================== */
::selection {
    background-color: var(--primary);
    color: white;
}

/* ==========================================
   SCROLLBAR
   ========================================== */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: var(--bg-secondary);
}

::-webkit-scrollbar-thumb {
    background: var(--border-strong);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--text-tertiary);
}

/* Firefox */
* {
    scrollbar-width: thin;
    scrollbar-color: var(--border-strong) var(--bg-secondary);
}

/* ==========================================
   UTILITY CLASSES
   ========================================== */

/* Container */
.container {
    width: 100%;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 1.5rem;
}

@media (min-width: 768px) {
    .container {
        padding: 0 2rem;
    }
}

@media (min-width: 1280px) {
    .container {
        padding: 0 3rem;
    }
}

/* Visually hidden (for screen readers) */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* ==========================================
   FILM GRAIN OVERLAY
   ========================================== */
.grain-overlay {
    position: fixed;
    /* Extend beyond viewport to prevent edge flickering during animation */
    inset: -10%;
    width: 120%;
    height: 120%;
    z-index: 9999;
    pointer-events: none;
    opacity: var(--grain-opacity);
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    background-repeat: repeat;
    background-size: 200px 200px;
    will-change: transform;
}

/* Animated grain - smoother, less noticeable movement */
@keyframes grain-shift {

    0%,
    100% {
        transform: translate(0, 0);
    }

    25% {
        transform: translate(-1%, -1%);
    }

    50% {
        transform: translate(1%, 0.5%);
    }

    75% {
        transform: translate(-0.5%, 1%);
    }
}

.grain-overlay--animated {
    animation: grain-shift 8s ease-in-out infinite;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
    .grain-overlay--animated {
        animation: none;
    }
}

/* ==========================================
   COMPONENT LAYER (Tailwind)
   ========================================== */
@layer components {

    /* Button base */
    .btn {
        @apply inline-flex items-center justify-center gap-2 px-4 py-2.5 font-medium text-sm border border-transparent rounded-md transition-all duration-fast ease-out-expo focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed;
    }

    .btn-primary {
        @apply bg-primary text-white hover:bg-primary-700 active:bg-primary-800 shadow-sm hover:shadow-md;
        /* Asegurar texto blanco en hover */
    }

    .btn-primary:hover {
        color: white !important;
    }

    .btn-secondary {
        @apply bg-surface border-border text-foreground hover:bg-surface-hover hover:border-border-strong active:bg-surface-active;
    }

    .btn-ghost {
        @apply bg-transparent text-foreground hover:bg-surface-hover active:bg-surface-active;
    }

    /* Input base */
    .input {
        @apply w-full px-4 py-2.5 bg-surface border border-border rounded-md text-foreground placeholder:text-foreground-tertiary transition-all duration-fast focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed;
    }

    /* Card */
    .card {
        @apply bg-surface border border-border rounded-lg shadow-sm transition-all duration-normal;
    }

    .card-hover {
        @apply hover:shadow-md hover:border-border-strong;
    }

    /* Badge / LED indicator */
    .badge {
        @apply inline-flex items-center gap-1.5 px-2 py-0.5 text-xs font-medium font-mono rounded-full border;
    }

    .badge-default {
        @apply bg-surface-hover border-border text-foreground-secondary;
    }

    .badge-primary {
        @apply bg-primary-muted border-primary/20 text-primary;
    }

    .badge-success {
        @apply bg-success-muted border-success/20 text-success;
    }

    .badge-warning {
        @apply bg-warning-muted border-warning/20 text-warning;
    }

    .badge-error {
        @apply bg-error-muted border-error/20 text-error;
    }

    /* LED indicator dot */
    .led {
        @apply inline-block w-2 h-2 rounded-full;
    }

    .led-off {
        @apply bg-indicator-off;
    }

    .led-on {
        @apply bg-indicator-on;
        box-shadow: 0 0 6px rgba(16, 185, 129, 0.5);
    }

    .led-active {
        @apply bg-indicator-active;
        box-shadow: 0 0 6px rgba(203, 104, 67, 0.5);
    }
}

/* ==========================================
   UTILITIES LAYER
   ========================================== */
@layer utilities {

    /* Text balance for headings */
    .text-balance {
        text-wrap: balance;
    }

    /* Aspect ratios */
    .aspect-product {
        aspect-ratio: 3 / 4;
    }

    /* Backdrop blur for overlays */
    .backdrop-blur-nav {
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
    }
}